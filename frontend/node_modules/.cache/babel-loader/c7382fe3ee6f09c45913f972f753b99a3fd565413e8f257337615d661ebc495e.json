{"ast":null,"code":"var _jsxFileName = \"/Users/elvischiqui/Desktop/e2e-encrypted-chatapp/frontend/src/components/Chatbox.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { to_Decrypt, to_Encrypt } from \"../aes.js\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chatbox = ({\n  username,\n  roomname,\n  socket\n}) => {\n  _s();\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState([]);\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(scrollToBottom, [messages]);\n  useEffect(() => {\n    socket.on('message', data => {\n      // Decrypt message\n      const decryptedText = to_Decrypt(data.text, data.username);\n\n      // Update messages state\n      setMessages(prevMessages => [...prevMessages, {\n        userId: data.userId,\n        username: data.username,\n        text: decryptedText\n      }]);\n    });\n  }, [socket]);\n  const sendData = () => {\n    if (text.trim() !== '') {\n      // Encrypt message\n      const encryptedText = to_Encrypt(text);\n\n      // Emit encrypted message\n      socket.emit('chat', encryptedText);\n\n      // Clear input field\n      setText('');\n    }\n  };\n  const messagesEndRef = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-gray-100 flex-none\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold\",\n        children: [username, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm\",\n          children: roomname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 60\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow p-4 overflow-y-auto\",\n      children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mb-2 ${message.username === username ? 'text-left' : 'text-right'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-800\",\n          children: message.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-500\",\n          children: message.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-gray-100 flex-none\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"flex-grow mr-2 py-1 px-2 rounded border border-gray-400 focus:outline-none focus:border-blue-500\",\n          type: \"text\",\n          placeholder: \"Enter your message\",\n          value: text,\n          onChange: e => setText(e.target.value),\n          onKeyPress: e => {\n            if (e.key === 'Enter') {\n              sendData();\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"py-1 px-3 rounded bg-blue-500 text-white hover:bg-blue-600 focus:outline-none\",\n          onClick: sendData,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 7\n  }, this);\n};\n_s(Chatbox, \"jxaWGgoQvAugwTm/qmXZi021I/c=\");\n_c = Chatbox;\nexport default Chatbox;\nvar _c;\n$RefreshReg$(_c, \"Chatbox\");","map":{"version":3,"names":["React","to_Decrypt","to_Encrypt","useState","useEffect","useRef","jsxDEV","_jsxDEV","Chatbox","username","roomname","socket","_s","text","setText","messages","setMessages","scrollToBottom","messagesEndRef","current","scrollIntoView","behavior","on","data","decryptedText","prevMessages","userId","sendData","trim","encryptedText","emit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","message","index","ref","type","placeholder","value","onChange","e","target","onKeyPress","key","onClick","_c","$RefreshReg$"],"sources":["/Users/elvischiqui/Desktop/e2e-encrypted-chatapp/frontend/src/components/Chatbox.jsx"],"sourcesContent":["import React from 'react'\nimport { to_Decrypt, to_Encrypt } from \"../aes.js\";\nimport { useState, useEffect, useRef } from \"react\";\n\nconst Chatbox = ({ username, roomname, socket }) => {\n    const [text, setText] = useState('');\n    const [messages, setMessages] = useState([]);\n  \n    const scrollToBottom = () => {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    };\n  \n    useEffect(scrollToBottom, [messages]);\n  \n    useEffect(() => {\n      socket.on('message', (data) => {\n        // Decrypt message\n        const decryptedText = to_Decrypt(data.text, data.username);\n  \n        // Update messages state\n        setMessages(prevMessages => [\n          ...prevMessages,\n          {\n            userId: data.userId,\n            username: data.username,\n            text: decryptedText,\n          }\n        ]);\n      });\n    }, [socket]);\n  \n    const sendData = () => {\n      if (text.trim() !== '') {\n        // Encrypt message\n        const encryptedText = to_Encrypt(text);\n  \n        // Emit encrypted message\n        socket.emit('chat', encryptedText);\n  \n        // Clear input field\n        setText('');\n      }\n    };\n  \n    const messagesEndRef = useRef(null);\n  \n    return (\n      <div className=\"flex flex-col h-full\">\n        <div className=\"p-4 bg-gray-100 flex-none\">\n          <h2 className=\"text-lg font-semibold\">{username} <span className=\"text-sm\">{roomname}</span></h2>\n        </div>\n        <div className=\"flex-grow p-4 overflow-y-auto\">\n          {messages.map((message, index) => (\n            <div key={index} className={`mb-2 ${message.username === username ? 'text-left' : 'text-right'}`}>\n              <p className=\"text-gray-800\">{message.text}</p>\n              <span className=\"text-sm text-gray-500\">{message.username}</span>\n            </div>\n          ))}\n          <div ref={messagesEndRef} />\n        </div>\n        <div className=\"p-4 bg-gray-100 flex-none\">\n          <div className=\"flex items-center\">\n            <input\n              className=\"flex-grow mr-2 py-1 px-2 rounded border border-gray-400 focus:outline-none focus:border-blue-500\"\n              type=\"text\"\n              placeholder=\"Enter your message\"\n              value={text}\n              onChange={(e) => setText(e.target.value)}\n              onKeyPress={(e) => {\n                if (e.key === 'Enter') {\n                  sendData();\n                }\n              }}\n            />\n            <button\n              className=\"py-1 px-3 rounded bg-blue-500 text-white hover:bg-blue-600 focus:outline-none\"\n              onClick={sendData}\n            >\n              Send\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  \n  export default Chatbox;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,EAAEC,UAAU,QAAQ,WAAW;AAClD,SAASC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,MAAMC,OAAO,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,QAAQ;EAAEC;AAAO,CAAC,KAAK;EAAAC,EAAA;EAChD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMc,cAAc,GAAGA,CAAA,KAAM;IAC3BC,cAAc,CAACC,OAAO,CAACC,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAC/D,CAAC;EAEDjB,SAAS,CAACa,cAAc,EAAE,CAACF,QAAQ,CAAC,CAAC;EAErCX,SAAS,CAAC,MAAM;IACdO,MAAM,CAACW,EAAE,CAAC,SAAS,EAAGC,IAAI,IAAK;MAC7B;MACA,MAAMC,aAAa,GAAGvB,UAAU,CAACsB,IAAI,CAACV,IAAI,EAAEU,IAAI,CAACd,QAAQ,CAAC;;MAE1D;MACAO,WAAW,CAACS,YAAY,IAAI,CAC1B,GAAGA,YAAY,EACf;QACEC,MAAM,EAAEH,IAAI,CAACG,MAAM;QACnBjB,QAAQ,EAAEc,IAAI,CAACd,QAAQ;QACvBI,IAAI,EAAEW;MACR,CAAC,CACF,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,EAAE,CAACb,MAAM,CAAC,CAAC;EAEZ,MAAMgB,QAAQ,GAAGA,CAAA,KAAM;IACrB,IAAId,IAAI,CAACe,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MACtB;MACA,MAAMC,aAAa,GAAG3B,UAAU,CAACW,IAAI,CAAC;;MAEtC;MACAF,MAAM,CAACmB,IAAI,CAAC,MAAM,EAAED,aAAa,CAAC;;MAElC;MACAf,OAAO,CAAC,EAAE,CAAC;IACb;EACF,CAAC;EAED,MAAMI,cAAc,GAAGb,MAAM,CAAC,IAAI,CAAC;EAEnC,oBACEE,OAAA;IAAKwB,SAAS,EAAC,sBAAsB;IAAAC,QAAA,gBACnCzB,OAAA;MAAKwB,SAAS,EAAC,2BAA2B;MAAAC,QAAA,eACxCzB,OAAA;QAAIwB,SAAS,EAAC,uBAAuB;QAAAC,QAAA,GAAEvB,QAAQ,EAAC,GAAC,eAAAF,OAAA;UAAMwB,SAAS,EAAC,SAAS;UAAAC,QAAA,EAAEtB;QAAQ;UAAAuB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9F,CAAC,eACN7B,OAAA;MAAKwB,SAAS,EAAC,+BAA+B;MAAAC,QAAA,GAC3CjB,QAAQ,CAACsB,GAAG,CAAC,CAACC,OAAO,EAAEC,KAAK,kBAC3BhC,OAAA;QAAiBwB,SAAS,EAAG,QAAOO,OAAO,CAAC7B,QAAQ,KAAKA,QAAQ,GAAG,WAAW,GAAG,YAAa,EAAE;QAAAuB,QAAA,gBAC/FzB,OAAA;UAAGwB,SAAS,EAAC,eAAe;UAAAC,QAAA,EAAEM,OAAO,CAACzB;QAAI;UAAAoB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/C7B,OAAA;UAAMwB,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAEM,OAAO,CAAC7B;QAAQ;UAAAwB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA,GAFzDG,KAAK;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGV,CACN,CAAC,eACF7B,OAAA;QAAKiC,GAAG,EAAEtB;MAAe;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzB,CAAC,eACN7B,OAAA;MAAKwB,SAAS,EAAC,2BAA2B;MAAAC,QAAA,eACxCzB,OAAA;QAAKwB,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAChCzB,OAAA;UACEwB,SAAS,EAAC,kGAAkG;UAC5GU,IAAI,EAAC,MAAM;UACXC,WAAW,EAAC,oBAAoB;UAChCC,KAAK,EAAE9B,IAAK;UACZ+B,QAAQ,EAAGC,CAAC,IAAK/B,OAAO,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UACzCI,UAAU,EAAGF,CAAC,IAAK;YACjB,IAAIA,CAAC,CAACG,GAAG,KAAK,OAAO,EAAE;cACrBrB,QAAQ,CAAC,CAAC;YACZ;UACF;QAAE;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACF7B,OAAA;UACEwB,SAAS,EAAC,+EAA+E;UACzFkB,OAAO,EAAEtB,QAAS;UAAAK,QAAA,EACnB;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAAxB,EAAA,CAhFGJ,OAAO;AAAA0C,EAAA,GAAP1C,OAAO;AAkFX,eAAeA,OAAO;AAAC,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}